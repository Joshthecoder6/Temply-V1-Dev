<div class="full-width-image-section-{{ section.id }} st_check-section--{{ section.id }}">
  {%- if section.settings.image != blank -%}
    <div class="full-width-image-container-{{ section.id }}">
      <img
        src="{{ section.settings.image | image_url: width: 1920 }}"
        srcset="
          {{ section.settings.image | image_url: width: 750 }} 750w,
          {{ section.settings.image | image_url: width: 1100 }} 1100w,
          {{ section.settings.image | image_url: width: 1500 }} 1500w,
          {{ section.settings.image | image_url: width: 1920 }} 1920w,
          {{ section.settings.image | image_url: width: 2400 }} 2400w
        "
        sizes="100vw"
        alt="{{ section.settings.image.alt | escape }}"
        loading="lazy"
        width="{{ section.settings.image.width }}"
        height="{{ section.settings.image.height }}"
      >
    </div>
  {%- else -%}
    <div class="full-width-image-placeholder-{{ section.id }}">
      <p>Bitte wählen Sie ein Bild aus</p>
    </div>
  {%- endif -%}
</div>

<script>
(function() {
  'use strict';
  const sectionId = '{{ section.id }}';
  const sectionSelector = '.st_check-section--' + sectionId;
  
  function checkAppEmbed() {
    const embedMarker = document.getElementById('temply-app-embed-active');
    const sectionElement = document.querySelector(sectionSelector);
    
    if (!sectionElement) return;
    
    if (!embedMarker) {
      // Hide section completely, no warning banner
      sectionElement.style.display = 'none';
    }
  }
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', checkAppEmbed);
  } else {
    checkAppEmbed();
  }
})();
</script>

<style>
  .full-width-image-section-{{ section.id }} {
    width: 100%;
    {% if section.settings.margin_top > 0 %}
      margin-top: {{ section.settings.margin_top | times: 0.75 | round: 0 }}px;
    {% endif %}
    {% if section.settings.margin_bottom > 0 %}
      margin-bottom: {{ section.settings.margin_bottom | times: 0.75 | round: 0 }}px;
    {% endif %}
  }

  @media screen and (min-width: 750px) {
    .full-width-image-section-{{ section.id }} {
      {% if section.settings.margin_top > 0 %}
        margin-top: {{ section.settings.margin_top }}px;
      {% endif %}
      {% if section.settings.margin_bottom > 0 %}
        margin-bottom: {{ section.settings.margin_bottom }}px;
      {% endif %}
    }
  }

  .full-width-image-container-{{ section.id }} {
    width: 100%;
    height: {{ section.settings.image_height_mobile }}px;
    overflow: hidden;
    position: relative;
  }

  @media screen and (min-width: 750px) {
    .full-width-image-container-{{ section.id }} {
      height: {{ section.settings.image_height_desktop }}px;
    }
  }

  .full-width-image-container-{{ section.id }} img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: {{ section.settings.image_position_horizontal }} {{ section.settings.image_position_vertical }};
    display: block;
  }

  .full-width-image-placeholder-{{ section.id }} {
    width: 100%;
    height: {{ section.settings.image_height_mobile }}px;
    background-color: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  @media screen and (min-width: 750px) {
    .full-width-image-placeholder-{{ section.id }} {
      height: {{ section.settings.image_height_desktop }}px;
    }
  }

  .full-width-image-placeholder-{{ section.id }} p {
    color: #999;
    font-size: 1rem;
    margin: 0;
  }
</style>

{% schema %}
{
  "name": "Vollbreites Bild",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Bild"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Bild"
    },
    {
      "type": "header",
      "content": "Bildhöhe"
    },
    {
      "type": "range",
      "id": "image_height_desktop",
      "min": 200,
      "max": 1000,
      "step": 50,
      "unit": "px",
      "label": "Bildhöhe Desktop",
      "default": 600
    },
    {
      "type": "range",
      "id": "image_height_mobile",
      "min": 150,
      "max": 800,
      "step": 25,
      "unit": "px",
      "label": "Bildhöhe Mobile",
      "default": 400
    },
    {
      "type": "header",
      "content": "Bildausrichtung"
    },
    {
      "type": "select",
      "id": "image_position_horizontal",
      "label": "Horizontale Ausrichtung",
      "options": [
        {
          "value": "left",
          "label": "Links"
        },
        {
          "value": "center",
          "label": "Mitte"
        },
        {
          "value": "right",
          "label": "Rechts"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "image_position_vertical",
      "label": "Vertikale Ausrichtung",
      "options": [
        {
          "value": "top",
          "label": "Oben"
        },
        {
          "value": "center",
          "label": "Mitte"
        },
        {
          "value": "bottom",
          "label": "Unten"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Abstände"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Außenabstand oben",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Außenabstand unten",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Vollbreites Bild",
      "settings": {
        "image_height_desktop": 600,
        "image_height_mobile": 400,
        "image_position_horizontal": "center",
        "image_position_vertical": "center"
      }
    }
  ]
}
{% endschema %}

