<!-- Temply App Embed Marker -->
<div id="temply-app-embed-active" style="display:none;" data-temply-version="1.0"></div>

{% comment %} Global Verifier Script - Checks all Temply sections on the page {% endcomment %}
<script>
(function() {
  'use strict';
  
  function initSectionVerifiers() {
    // Find all Temply sections
    const templySections = document.querySelectorAll('[class*="st_check-section--"]');
    
    // Check if app embed is active
    const embedMarker = document.getElementById('temply-app-embed-active');
    
    if (!embedMarker) {
      // App embed is NOT enabled
      templySections.forEach(section => {
        if (window.Shopify?.designMode) {
          // In theme editor, show warning
          section.innerHTML = `
            <div style="padding: 40px; text-align: center; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px; margin: 20px;">
              <h3 style="margin: 0 0 10px 0; color: #856404;">⚠️ Temply App Embed Required</h3>
              <p style="margin: 0; color: #856404;">Bitte aktiviere das Temply App Embed im Theme Editor (App embeds) um diesen Inhalt anzuzeigen.</p>
            </div>
          `;
        } else {
          // On live site, completely hide
          section.style.display = 'none';
        }
      });
    }
    // If embedMarker exists, sections remain visible
  }
  
  // Run when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSectionVerifiers);
  } else {
    initSectionVerifiers();
  }
})();
</script>

{% schema %}
{
  "name": "Temply",
  "target": "body",
  "settings": [
  ]
}
{% endschema %}

